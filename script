CREATE DATABASE IF NOT EXISTS food_db;
USE food_db;

DROP TABLE IF EXISTS DISH_INGREDIENT;
DROP TABLE IF EXISTS INGREDIENT;
DROP TABLE IF EXISTS DISH;
DROP TABLE IF EXISTS CUISINE;

CREATE TABLE CUISINE (
    cuisine_id   VARCHAR(10) PRIMARY KEY,
    cuisine_name VARCHAR(50)
);

CREATE TABLE DISH (
    dish_id      VARCHAR(10) PRIMARY KEY,
    dish_name    VARCHAR(50),
    cuisine_id   VARCHAR(10),
    price        FLOAT,
    vegetarian   BOOLEAN,
    popularity   INT,
    FOREIGN KEY (cuisine_id) REFERENCES CUISINE(cuisine_id)
);

CREATE TABLE INGREDIENT (
    ingredient_id   VARCHAR(10) PRIMARY KEY,
    ingredient_name VARCHAR(50)
);

CREATE TABLE DISH_INGREDIENT (
    dish_id       VARCHAR(10),
    ingredient_id VARCHAR(10),
    PRIMARY KEY (dish_id, ingredient_id),
    FOREIGN KEY (dish_id) REFERENCES DISH(dish_id),
    FOREIGN KEY (ingredient_id) REFERENCES INGREDIENT(ingredient_id)
);

-- Insert data
INSERT INTO CUISINE VALUES ('C001', 'Italian');
INSERT INTO CUISINE VALUES ('C002', 'Indian');
INSERT INTO CUISINE VALUES ('C003', 'Japanese');

INSERT INTO DISH VALUES ('D001', 'Pizza',       'C001', 8.50, 0, 95);
INSERT INTO DISH VALUES ('D002', 'Veg Biryani', 'C002', 6.00, 1, 90);
INSERT INTO DISH VALUES ('D003', 'Sushi',       'C003',12.00, 0, 85);
INSERT INTO DISH VALUES ('D004', 'Pasta',       'C001', 7.80, 1, 80);

INSERT INTO INGREDIENT VALUES ('I001', 'Cheese');
INSERT INTO INGREDIENT VALUES ('I002', 'Tomato');
INSERT INTO INGREDIENT VALUES ('I003', 'Rice');
INSERT INTO INGREDIENT VALUES ('I004', 'Olive Oil');

INSERT INTO DISH_INGREDIENT VALUES ('D001', 'I001');
INSERT INTO DISH_INGREDIENT VALUES ('D001', 'I002');
INSERT INTO DISH_INGREDIENT VALUES ('D002', 'I003');
INSERT INTO DISH_INGREDIENT VALUES ('D003', 'I003');
INSERT INTO DISH_INGREDIENT VALUES ('D004', 'I002');
INSERT INTO DISH_INGREDIENT VALUES ('D004', 'I004');
